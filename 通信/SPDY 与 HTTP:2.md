# 与 HTTP/2
### 功能概述
HTTP/2 致力于通过支持标头字段压缩和在同一连接上进行多个并发交换，让应用更有效地利用网络资源，减少感知的延迟时间。具体来说，它可以对同一连接上的请求和响应消息进行交错发送并为 HTTP 标头字段使用有效编码。 HTTP/2 还允许为请求设置优先级，让更重要的请求更快速地完成，从而进一步提升性能。出台的协议对网络更加友好，因为与 HTTP/1.x 相比，可以使用更少的 TCP 连接。
### 与SPDY的关系
#### SPDY
SPDY 是 Google 开发的一个实验性协议，于 2009 年年中发布，其主要目标是通过解决 HTTP/1.1 中广为人知的一些性能限制来减少网页的加载延迟。
#### HTTP/2
由于 SPDY所取得的成果非常显著，所以慢慢得到Chrome，Firefox 等浏览器的支持，基本具备成为一个标准的条件。于是 HTTP 工作组便将 SPDY 作为 HTTP/2协议的基础。



这意味着与其他流的竞争减小，并且连接的持续时间变长，这些特性反过来提高了可用网络容量的利用率。 最后，HTTP/2 还可以通过使用二进制消息分帧对消息进行更高效的处理。
### 相关概念
* 数据流（火车）：已建立的连接内的双向字节流。可以承载一条或者多条消息。
* 消息（车厢）：与逻辑请求或者响应消息对应的完整的一系列帧。
* 帧（乘客）：HTTP/2通信的最小单位，每个帧都包含帧头，用于标识该帧的一些信息，至少包含标识该帧属于哪个数据流。

总结一下他们之间的关系：
> 所有的通信都在一个 TCP 连接（铁轨）之上完成，此连接可以承载任意数量的双向数据流。
>
> 每个数据流都有唯一的标识符和可选的优先级信息，用于承载双向消息。
> 
> 每条消息都是一条逻辑 HTTP 消息（请求或者响应），包含一个或多个帧。
> 
> 帧是最小的通信单位，可以承载特定类型的数据。如 HTTP 标头，消息负载等。来自不同数据流的帧可以交替发送，然后再根据每个帧头的数据流标识符进行组装。

![](streams_messages_frames01.svg)

### 特点总结
1. 二进制分帧层（核心特点）
2. 多路复用
3. 数据流优先级
4. 流控制
5. header 压缩
6. 服务器端推送


迁移到 HTTP/2 不仅可以减少网络延迟，还有助于提高通量和降低运行成本。

